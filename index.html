<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Magnum — Legal AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --ink: #1a1a1a;
            --paper: #f8f5f0;
            --cream: #ede9e2;
            --gold: #c49a3c;
            --gold-light: #e8c96e;
            --muted: #7a7069;
            --rule: #d9d3c8;
            --chat-bg: #fdfcfa;
            --user-bg: #1a1a1a;
            --bot-bg: #ffffff;
            --radius: 2px;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--paper);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: #ffe88a;
background: linear-gradient(0deg, rgb(53, 255, 231) 0%, rgba(255, 195, 65, 0.75) 100%);
        }

        .shell {
            width: 100%;
            max-width: 680px;
            display: flex;
            flex-direction: column;
            gap: 0;
            animation: rise 0.6s cubic-bezier(.22,.61,.36,1) both;
        }

        @keyframes rise {
            from { opacity: 0; transform: translateY(24px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* Header */
        .header {
            background: var(--ink);
            color: var(--paper);
            padding: 28px 36px 24px;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            border-radius: 4px 4px 0 0;
        }

        .header-left { display: flex; flex-direction: column; gap: 4px; }

        .wordmark {
            font-family: 'Playfair Display', serif;
            font-size: 1.9rem;
            font-weight: 600;
            letter-spacing: -0.5px;
            color: #fff;
            line-height: 1;
        }

        .wordmark span { color: var(--gold); }

        .tagline {
            font-size: 0.72rem;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.38);
            font-weight: 300;
        }

        .status-dot {
            display: flex;
            align-items: center;
            gap: 7px;
            font-size: 0.72rem;
            color: rgba(255,255,255,0.5);
            letter-spacing: 0.06em;
        }

        .dot {
            width: 7px; height: 7px;
            border-radius: 50%;
            background: #4ade80;
            box-shadow: 0 0 8px #4ade8088;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%,100% { opacity: 1; }
            50%      { opacity: 0.4; }
        }

        /* Divider */
        .gold-bar {
            height: 3px;
            background: linear-gradient(90deg, var(--gold), var(--gold-light), var(--gold));
        }

        /* Chat area */
        .chat-area {
            background: var(--chat-bg);
            border-left: 1px solid var(--rule);
            border-right: 1px solid var(--rule);
            height: 420px;
            overflow-y: auto;
            padding: 28px 32px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            scroll-behavior: smooth;
        }

        .chat-area::-webkit-scrollbar { width: 4px; }
        .chat-area::-webkit-scrollbar-track { background: transparent; }
        .chat-area::-webkit-scrollbar-thumb { background: var(--rule); border-radius: 4px; }

        /* Empty state */
        .empty-state {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 14px;
            color: var(--muted);
            text-align: center;
        }

        .scale-icon {
            font-size: 2.4rem;
            opacity: 0.4;
        }

        .empty-state p {
            font-size: 0.85rem;
            line-height: 1.6;
            max-width: 280px;
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-top: 4px;
        }

        .sug-pill {
            font-size: 0.73rem;
            padding: 5px 12px;
            border: 1px solid var(--rule);
            border-radius: 100px;
            color: var(--muted);
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .sug-pill:hover {
            border-color: var(--gold);
            color: var(--gold);
            background: rgba(196,154,60,0.05);
        }

        /* Messages */
        .msg {
            display: flex;
            gap: 12px;
            animation: msgIn 0.3s cubic-bezier(.22,.61,.36,1) both;
        }

        @keyframes msgIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .msg.user { flex-direction: row-reverse; }

        .avatar {
            width: 32px; height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .msg.user .avatar {
            background: var(--ink);
            color: var(--gold);
            font-family: 'Playfair Display', serif;
        }

        .msg.bot .avatar {
            background: var(--gold);
            color: white;
            font-size: 1rem;
        }

        .bubble {
            max-width: 72%;
            padding: 13px 17px;
            font-size: 0.875rem;
            line-height: 1.65;
            border-radius: var(--radius);
            position: relative;
        }

        .msg.user .bubble {
            background: var(--user-bg);
            color: rgba(255,255,255,0.9);
            border-radius: 12px 2px 12px 12px;
        }

        .msg.bot .bubble {
            background: var(--bot-bg);
            color: var(--ink);
            border: 1px solid var(--rule);
            border-radius: 2px 12px 12px 12px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        }

        .msg-meta {
            font-size: 0.65rem;
            margin-top: 5px;
            color: var(--muted);
            opacity: 0.7;
        }

        .msg.user .msg-meta { text-align: right; }

        /* Typing indicator */
        .typing .bubble {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 14px 18px;
        }

        .typing .bubble span {
            width: 6px; height: 6px;
            background: var(--gold);
            border-radius: 50%;
            animation: bounce 1.2s ease-in-out infinite;
        }

        .typing .bubble span:nth-child(2) { animation-delay: 0.2s; }
        .typing .bubble span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes bounce {
            0%,80%,100% { transform: translateY(0); opacity: 0.4; }
            40%          { transform: translateY(-5px); opacity: 1; }
        }

        /* Disclaimer banner */
        .disclaimer {
            background: #fffbf0;
            border-left: 1px solid var(--rule);
            border-right: 1px solid var(--rule);
            padding: 9px 32px;
            font-size: 0.68rem;
            color: var(--muted);
            display: flex;
            align-items: center;
            gap: 7px;
            border-top: 1px solid #f0ead9;
        }

        .disclaimer::before {
            content: "⚠";
            color: var(--gold);
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        /* Input zone */
        .input-zone {
            background: white;
            border: 1px solid var(--rule);
            border-top: 2px solid var(--ink);
            border-radius: 0 0 4px 4px;
            padding: 16px 20px;
            display: flex;
            align-items: flex-end;
            gap: 12px;
        }

        .input-wrap {
            flex: 1;
            display: flex;
            align-items: center;
            background: var(--paper);
            border: 1px solid var(--rule);
            border-radius: 100px;
            padding: 0 18px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .input-wrap:focus-within {
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(196,154,60,0.12);
        }

        #user-input {
            flex: 1;
            border: none;
            background: transparent;
            padding: 12px 0;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.88rem;
            color: var(--ink);
            outline: none;
        }

        #user-input::placeholder { color: rgba(122,112,105,0.6); }

        .send-btn {
            width: 42px; height: 42px;
            border-radius: 50%;
            border: none;
            background: var(--ink);
            color: var(--gold);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            transition: background 0.2s, transform 0.15s;
            flex-shrink: 0;
        }

        .send-btn:hover {
            background: var(--gold);
            color: white;
            transform: scale(1.05);
        }

        .send-btn:active { transform: scale(0.97); }

        /* footer */
        .footer-note {
            text-align: center;
            font-size: 0.65rem;
            color: var(--muted);
            opacity: 0.6;
            margin-top: 14px;
            letter-spacing: 0.04em;
        }

    </style>
</head>
<body>

<div class="shell">
    <header class="header">
        <div class="header-left">
            <div class="wordmark">Magnum<span>.</span></div>
            <div class="tagline">Legal AI Assistant</div>
        </div>
        <div class="status-dot">
            <div class="dot"></div>
            Available
        </div>
    </header>

    <div class="gold-bar"></div>

    <div class="chat-area" id="chat-box">
        <div class="empty-state" id="empty-state">
            <div class="scale-icon">⚖️</div>
            <p>Ask any legal question.</p>
            <div class="suggestions">
                <div class="sug-pill" onclick="fillSuggestion(this)">What is the speed limit law for 2 wheelers ?</div>
                <div class="sug-pill" onclick="fillSuggestion(this)">How do I file a small claims?</div>
                <div class="sug-pill" onclick="fillSuggestion(this)">What are tenant rights?</div>
                <div class="sug-pill" onclick="fillSuggestion(this)">Explain NDA agreements</div>
            </div>
        </div>
    </div>

    <div class="disclaimer">
        For informational purposes only. This is not legal advice. Consult a licensed attorney for your specific situation.
    </div>

    <div class="input-zone">
        <div class="input-wrap">
            <input type="text" id="user-input" placeholder="Ask a legal question…" autocomplete="off" />
        </div>
        <button class="send-btn" onclick="sendMessage()" title="Send">
            ➤
        </button>
    </div>

    <p class="footer-note">Powered by Legal AI · All conversations are confidential</p>
</div>

<script>
    const chatBox = document.getElementById("chat-box");
    const inputField = document.getElementById("user-input");
    const emptyState = document.getElementById("empty-state");

    inputField.addEventListener("keydown", e => {
        if (e.key === "Enter") sendMessage();
    });

    function fillSuggestion(el) {
        inputField.value = el.textContent;
        inputField.focus();
    }

    function getTime() {
        return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }

    function appendMsg(who, text) {
        if (emptyState.parentNode) emptyState.remove();

        const msgEl = document.createElement("div");
        msgEl.className = `msg ${who}`;

        const avatarChar = who === "user" ? "Y" : "⚖";
        msgEl.innerHTML = `
            <div class="avatar">${avatarChar}</div>
            <div>
                <div class="bubble">${escapeHtml(text)}</div>
                <div class="msg-meta">${getTime()}</div>
            </div>`;

        chatBox.appendChild(msgEl);
        chatBox.scrollTop = chatBox.scrollHeight;
        return msgEl;
    }

    function showTyping() {
        if (emptyState.parentNode) emptyState.remove();

        const el = document.createElement("div");
        el.className = "msg bot typing";
        el.id = "typing-indicator";
        el.innerHTML = `
            <div class="avatar">⚖</div>
            <div class="bubble">
                <span></span><span></span><span></span>
            </div>`;
        chatBox.appendChild(el);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function removeTyping() {
        const el = document.getElementById("typing-indicator");
        if (el) el.remove();
    }

    function escapeHtml(text) {
        return text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/\n/g, "<br>");
    }

    function sendMessage() {
        const message = inputField.value.trim();
        if (!message) return;

        appendMsg("user", message);
        inputField.value = "";
        showTyping();

        fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message })
        })
        .then(r => r.json())
        .then(data => {
            removeTyping();
            appendMsg("bot", data.reply);
        })
        .catch(() => {
            removeTyping();
            appendMsg("bot", "I'm having trouble connecting. Please try again.");
        });
    }
</script>

</body>
</html>